(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/topaid"],{511:function(t,e,n){"use strict";(function(t){n(5);r(n(4));var e=r(n(512));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},512:function(t,e,n){"use strict";n.r(e);var r=n(513),o=n(515);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n(517);var s,a=n(11),c=Object(a["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"4363e2a1",null,!1,r["components"],s);c.options.__file="pages/order/topaid.vue",e["default"]=c.exports},513:function(t,e,n){"use strict";n.r(e);var r=n(514);n.d(e,"render",(function(){return r["render"]})),n.d(e,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(e,"components",(function(){return r["components"]}))},514:function(t,e,n){"use strict";var r;n.r(e),n.d(e,"render",(function(){return o})),n.d(e,"staticRenderFns",(function(){return s})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return r}));try{r={uCellGroup:function(){return n.e("uview-ui/components/u-cell-group/u-cell-group").then(n.bind(null,667))},uCellItem:function(){return n.e("uview-ui/components/u-cell-item/u-cell-item").then(n.bind(null,674))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var t=this,e=t.$createElement;t._self._c},i=!1,s=[];o._withStripped=!0},515:function(t,e,n){"use strict";n.r(e);var r=n(516),o=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},516:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{Height:"810",background:"none",page:{status:"loadMore",pageNum:1,pageSize:10},cardCode:"",price:0,list:[],buts:[]}},watch:{list:{handler:function(){for(var t=0;t<this.list[0].omsOrderItemEntityList.length;t++)this.price+=Number(this.list[0].omsOrderItemEntityList[t].skuQuantity)*Number(this.list[0].omsOrderItemEntityList[t].skuPrice);this.price=this.price.toFixed(2)}},deep:!0},onLoad:function(e){var n=JSON.parse(decodeURIComponent(e.list));console.log(n),"0"===n.orderStatus?t.setNavigationBarTitle({title:"待付款"}):"1"===n.orderStatus?t.setNavigationBarTitle({title:"待送货"}):"2"===n.orderStatus?t.setNavigationBarTitle({title:"送货中"}):"3"===n.orderStatus?t.setNavigationBarTitle({title:"已送完"}):"6"===n.orderStatus&&t.setNavigationBarTitle({title:"已关闭"}),this.getAppHeight(),this.getOrderList(n.batchId),this.getbuts(n.orderStatus)},methods:{handerCode:function(){var e=this;this.list.forEach((function(n){e.cardCode&&e.$u.api.queryByCardCode({cardCode:e.cardCode,skuId:n.omsOrderItemEntityList[0].skuId}).then((function(r){n.omsOrderItemEntityList[0].cardCode=e.cardCode,t.showToast({title:"有效提货码"})})).catch((function(e){t.showToast({title:e.msg})}))}))},operationBtn:function(t){switch(t){case"待付款":this.topaid();break;case"取消订单":this.cancelOrder();break;case"去复购":this.repurchase();break;case"提醒发货":this.remindDelivery();break;case"确认收货":this.confirmReceipt();break;case"查看物流":this.checkLogistics();break;case"申请退款":this.refund();break}},topaid:function(){var e=[],n=[],r=[];this.list[0].omsOrderItemEntityList.map((function(t){e.push(t.spuId),n.push(t.skuId),r.push(t.skuQuantity)})),t.navigateTo({url:"/pages/order/confirmOrder?supId="+e.join(",")+"&skuId="+n.join(",")+"&num="+r.join(",")+"&orderSn="+this.list[0].orderSn+"&batchId="+this.list[0].batchId})},cancelOrder:function(){var e=t.getStorageSync("current");this.$u.api.updateStatus({orderSn:this.list[0].orderSn,orderStatus:"6",deliverySn:""}).then((function(n){t.showToast({title:"已取消订单"}),t.reLaunch({url:"/pages/order/index?current="+e+"&orderStatus=0"})})).catch()},refund:function(){var e=this.list[0],n=["该订单为月付订单，不可申请退款","该订单为先送后付订单，不可申请退款","该订单为可退数量为0，不可申请退款"],r=-1;e.totalCanRefundNum<=0&&(r=2),3==e.payType?r=0:1==e.payType&&(r=1),r>-1?t.showModal({title:"提示",content:n[r],confirmColor:"black",showCancel:!1,confirmText:"确定",success:function(t){t.confirm&&console.log("没有操作")}}):t.navigateTo({url:"/pages/my/torefund?id="+e.id+"&orderSn="+e.orderSn+"&payAmount="+e.payAmount+"&omsOrderItemEntityList="+encodeURIComponent(JSON.stringify(e.omsOrderItemEntityList))+"&totalRefundAmount="+e.totalRefundAmount+"&totalCanRefundNum="+e.totalCanRefundNum})},repurchase:function(){console.log("去复购")},remindDelivery:function(){console.log("提醒发货")},confirmReceipt:function(){console.log("确认收货")},checkLogistics:function(){console.log("查看物流")},getbuts:function(t){switch(t){case"0":this.buts=["取消订单","待付款"];break;case"1":this.buts=["申请退款"];break;case"2":this.buts=["申请退款"];break}},getOrderList:function(t){var e=this;this.$u.api.queryOrder({batchId:t}).then((function(t){console.log(t),e.list=t})).catch()},getAppHeight:function(){this.Height=t.getSystemInfoSync().windowHeight+"px"}}};e.default=n}).call(this,n(1)["default"])},517:function(t,e,n){"use strict";n.r(e);var r=n(518),o=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},518:function(t,e,n){}},[[511,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/topaid.js.map