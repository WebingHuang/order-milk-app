(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/edit"],{162:function(e,t,s){"use strict";(function(e){s(5);n(s(4));var t=n(s(163));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=s,e(t.default)}).call(this,s(1)["createPage"])},163:function(e,t,s){"use strict";s.r(t);var n=s(164),i=s(166);for(var o in i)"default"!==o&&function(e){s.d(t,e,(function(){return i[e]}))}(o);s(168);var r,a=s(11),c=Object(a["default"])(i["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);c.options.__file="pages/address/edit.vue",t["default"]=c.exports},164:function(e,t,s){"use strict";s.r(t);var n=s(165);s.d(t,"render",(function(){return n["render"]})),s.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),s.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),s.d(t,"components",(function(){return n["components"]}))},165:function(e,t,s){"use strict";var n;s.r(t),s.d(t,"render",(function(){return i})),s.d(t,"staticRenderFns",(function(){return r})),s.d(t,"recyclableRender",(function(){return o})),s.d(t,"components",(function(){return n}));try{n={uForm:function(){return s.e("uview-ui/components/u-form/u-form").then(s.bind(null,695))},uFormItem:function(){return Promise.all([s.e("common/vendor"),s.e("uview-ui/components/u-form-item/u-form-item")]).then(s.bind(null,702))},uInput:function(){return Promise.all([s.e("common/vendor"),s.e("uview-ui/components/u-input/u-input")]).then(s.bind(null,711))},uPicker:function(){return Promise.all([s.e("common/vendor"),s.e("uview-ui/components/u-picker/u-picker")]).then(s.bind(null,718))},uSearch:function(){return s.e("uview-ui/components/u-search/u-search").then(s.bind(null,587))},uButton:function(){return s.e("uview-ui/components/u-button/u-button").then(s.bind(null,646))},uSwitch:function(){return s.e("uview-ui/components/u-switch/u-switch").then(s.bind(null,728))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.show=!0})},o=!1,r=[];i._withStripped=!0},166:function(e,t,s){"use strict";s.r(t);var n=s(167),i=s.n(n);for(var o in n)"default"!==o&&function(e){s.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},167:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(80));function i(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){var e=this;return{indexList:[],schoolList:[],extra:{schoolName:"",className:""},schoolClassList:[],classList:[],Height:"",checked:!1,form:{name:"",parentsMobile:"",area:"",textarea:""},address:{},show:!1,isTransferRange:[{label:"否",id:0},{label:"是",id:1}],showSchool:!1,showClass:!1,isTransferShow:!1,extar:{schoolName:"",className:""},rules:{studentName:[{required:!0,message:"请输入姓名"}],parentsMobile:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:function(t,s,n){return e.$u.test.mobile(s)},message:"手机号码不正确",trigger:["change","blur"]}],schoolName:[{required:!0,message:"请输入所在学校"}],className:[{required:!0,message:"请输入所在班级"}]},id:"",disabled:!1}},onLoad:function(t){var s=this;this.loadmore(),t.id&&(this.id=t.id,e.setNavigationBarTitle({title:"编辑地址"}),this.$u.api.queryUserInformation({id:t.id}).then((function(e){var n=e.find((function(e){return e.id==t.id}));console.log(e,"编辑地址"),s.form={studentName:n.studentName,parentsMobile:n.parentsMobile,schoolName:n.schoolName,className:n.className,isTransfer:n.isTransfer&&s.isTransferRange[n.isTransfer].label||""},s.checked="0"!==n.sequence,s.disabled="1"===n.sequence})).catch((function(e){}))),this.getAppHeight()},onReady:function(){this.$refs.uForm.setRules(this.rules)},methods:{searchSchool:n.default.debounce((function(e){this.indexList=e?this.schoolList.filter((function(t){return t.schoolName.indexOf(e)>-1})):this.schoolList}),1e3,{leading:!0}),searchClass:n.default.debounce((function(e){this.schoolClassList=e?this.classList.filter((function(t){return t.className.indexOf(e)>-1})):this.classList}),1e3,{leading:!0}),geToSelectSchool:function(){this.showSchool=!0,this.indexList=this.schoolList,e.setNavigationBarTitle({title:"选择学校"})},geToSelectClass:function(){this.showClass=!0,this.schoolClassList=this.classList,e.setNavigationBarTitle({title:"选择班级"})},selectedSchool:function(t){this.form.schoolName=t.schoolName,this.form.className="",this.schoolClassList=t.schoolClassList||[],this.classList=JSON.parse(JSON.stringify(this.schoolClassList)),this.showSchool=!1,e.setNavigationBarTitle({title:this.id?"编辑学生信息":"添加学生信息"})},selectedClass:function(t){this.form.className=t.className,this.showClass=!1,e.setNavigationBarTitle({title:this.id?"编辑学生信息":"添加学生信息"})},scrolltolower:function(){this.loadmore()},loadmore:function(){this.searchQuery()},searchQuery:function(e){var t=this;this.$u.api.querySchoolsAndClass({pageNum:1,pageSize:50,schoolName:e}).then((function(e){t.indexList=e.records,t.schoolList=JSON.parse(JSON.stringify(t.indexList))}))},submit:function(){var e=this;this.$refs.uForm.validate((function(t){t?""!==e.id?e.alterAddress():e.addAddress():console.log("验证失败")}))},cancel:function(){this.show=!1},confirm:function(e){this.form.isTransfer=this.isTransferRange[e].label},alterAddress:function(){var t=this;this.$u.api.addOrUpdateStuInformation({studentName:this.form.studentName,parentsMobile:this.form.parentsMobile,schoolName:this.form.schoolName,className:this.form.className,id:this.id,sequence:this.checked?1:0,isTransfer:this.form.isTransfer&&this.isTransferRange.find((function(e){return e.label==t.form.isTransfer})).id||""}).then((function(t){e.navigateBack()})).catch((function(e){}))},addAddress:function(){var t=this;this.$u.api.addOrUpdateStuInformation({studentName:this.form.studentName,parentsMobile:this.form.parentsMobile,schoolName:this.form.schoolName,className:this.form.className,sequence:this.checked?1:0,isTransfer:this.form.isTransfer&&this.isTransferRange.find((function(e){return e.label==t.form.isTransfer})).id||""}).then((function(t){e.navigateBack()})).catch((function(e){}))},change:function(e){},getAppHeight:function(){this.Height=e.getSystemInfoSync().windowHeight+"px"}}};t.default=o}).call(this,s(1)["default"])},168:function(e,t,s){"use strict";s.r(t);var n=s(169),i=s.n(n);for(var o in n)"default"!==o&&function(e){s.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},169:function(e,t,s){}},[[162,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/address/edit.js.map