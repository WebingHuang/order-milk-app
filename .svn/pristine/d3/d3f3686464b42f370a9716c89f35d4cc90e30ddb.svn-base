(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/index"],{266:function(e,n,t){"use strict";(function(e){t(5);o(t(4));var n=o(t(267));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t(1)["createPage"])},267:function(e,n,t){"use strict";t.r(n);var o=t(268),r=t(270);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t(429);var a,c=t(11),u=Object(c["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"4586967a",null,!1,o["components"],a);u.options.__file="pages/login/index.vue",n["default"]=u.exports},268:function(e,n,t){"use strict";t.r(n);var o=t(269);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},269:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return a})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return o}));var r=function(){var e=this,n=e.$createElement;e._self._c},i=!1,a=[];r._withStripped=!0},270:function(e,n,t){"use strict";t.r(n);var o=t(271),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},271:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t(272));function r(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{code:"",openid:"",iv:"",encryptedData:"",appId:"",sessionkey:"",userInfo:{iv:"",encryptedData:""},phone:"",isLogin:!0,nickName:"",avatarUrl:"",isCanUse:e.getStorageSync("isCanUse")||!0}},onLoad:function(){this.login()},methods:{wxLogin:function(){var n=this,t=this;t.$u.api.wxLogin({openId:t.openid,userHeader:t.avatarUrl,userName:t.nickName,userPhone:t.phone}).then((function(t){e.setStorageSync("token",t),e.navigateBack(),n.$u.api.whetherRenewalNotice().then((function(n){(null===n||void 0===n?void 0:n.flag)&&e.showModal({title:"提示",content:n.note,cancelColor:"black",confirmColor:"black",showCancel:!0,cancelText:"已知晓",confirmText:"立即续订",success:function(n){n.confirm&&e.navigateTo({url:"/pages/commodity/index"})}})}))})).catch((function(e){n.$u.toast(e.data.message)}))},PhoneNumber:function(n){var t=this;if("getPhoneNumber:ok"==n.detail.errMsg){t.encryptedData=n.detail.encryptedData,t.iv=n.detail.iv;var r=new o.default(t.appId,t.sessionkey),i=r.decryptData(t.encryptedData,n.detail.iv);e.setStorageSync("phoneNumber",i.phoneNumber),t.phone=i.purePhoneNumber,t.wxLogin()}},wxGetUserInfo:function(){var n=this;e.showLoading({title:"拉取授权中"}),e.getUserProfile({desc:"授权登录",lang:"zh_CN",success:function(t){console.log(t),n.nickName=t.userInfo.nickName,n.avatarUrl=t.userInfo.avatarUrl;try{n.isLogin=!1,e.setStorageSync("isCanUse",!1),e.hideLoading()}catch(o){}},fail:function(e){}})},login:function(){var n=this;e.login({provider:"weixin",success:function(t){n.code=t.code,n.$u.api.wxgetUserInfo({code:n.code}).then((function(t){n.openid=t.openId,n.appId=t.appId,n.sessionkey=t.sessionKey,e.setStorageSync("openid",n.openid)})).catch((function(e){console.log(e)}))}})}}};n.default=i}).call(this,t(1)["default"])},429:function(e,n,t){"use strict";t.r(n);var o=t(430),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},430:function(e,n,t){}},[[266,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/index.js.map