(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/topaid"],{511:function(t,e,n){"use strict";(function(t){n(5);r(n(4));var e=r(n(512));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},512:function(t,e,n){"use strict";n.r(e);var r=n(513),i=n(515);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n(517);var s,c=n(11),u=Object(c["default"])(i["default"],r["render"],r["staticRenderFns"],!1,null,"4363e2a1",null,!1,r["components"],s);u.options.__file="pages/order/topaid.vue",e["default"]=u.exports},513:function(t,e,n){"use strict";n.r(e);var r=n(514);n.d(e,"render",(function(){return r["render"]})),n.d(e,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(e,"components",(function(){return r["components"]}))},514:function(t,e,n){"use strict";var r;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return s})),n.d(e,"recyclableRender",(function(){return o})),n.d(e,"components",(function(){return r}));try{r={uCellGroup:function(){return n.e("uview-ui/components/u-cell-group/u-cell-group").then(n.bind(null,667))},uCellItem:function(){return n.e("uview-ui/components/u-cell-item/u-cell-item").then(n.bind(null,674))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement;t._self._c},o=!1,s=[];i._withStripped=!0},515:function(t,e,n){"use strict";n.r(e);var r=n(516),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=i.a},516:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{Height:"810",background:"none",page:{status:"loadMore",pageNum:1,pageSize:10},cardCode:"",price:0,list:[],buts:[]}},watch:{list:{handler:function(){for(var t=0;t<this.list[0].omsOrderItemEntityList.length;t++)this.price+=Number(this.list[0].omsOrderItemEntityList[t].skuQuantity)*Number(this.list[0].omsOrderItemEntityList[t].skuPrice);this.price=this.price.toFixed(2)}},deep:!0},onLoad:function(e){var n=JSON.parse(decodeURIComponent(e.list));console.log(n),"0"===n.orderStatus?t.setNavigationBarTitle({title:"待付款"}):"1"===n.orderStatus?t.setNavigationBarTitle({title:"待送货"}):"2"===n.orderStatus&&t.setNavigationBarTitle({title:"送货中"}),this.getAppHeight(),this.getOrderList(n.batchId),this.getbuts(n.orderStatus)},methods:{handerCode:function(){var e=this;this.list.forEach((function(n){e.cardCode&&e.$u.api.queryByCardCode({cardCode:e.cardCode,skuId:n.omsOrderItemEntityList[0].skuId}).then((function(r){n.omsOrderItemEntityList[0].cardCode=e.cardCode,t.showToast({title:"有效提货码"})})).catch((function(e){t.showToast({title:e.msg})}))}))},operationBtn:function(t){switch(t){case"待付款":this.topaid();break;case"取消订单":this.cancelOrder();break;case"去复购":this.repurchase();break;case"提醒发货":this.remindDelivery();break;case"确认收货":this.confirmReceipt();break;case"查看物流":this.checkLogistics();break;case"申请退款":this.refund(t);break}},topaid:function(){var e=[],n=[],r=[];this.list[0].omsOrderItemEntityList.map((function(t){e.push(t.spuId),n.push(t.skuId),r.push(t.skuQuantity)})),t.navigateTo({url:"/pages/order/confirmOrder?supId="+e.join(",")+"&skuId="+n.join(",")+"&num="+r.join(",")+"&orderSn="+this.list[0].orderSn+"&batchId="+this.list[0].batchId})},cancelOrder:function(){var e=t.getStorageSync("current");this.$u.api.updateStatus({orderSn:this.list[0].orderSn,orderStatus:"6",deliverySn:""}).then((function(n){t.showToast({title:"已取消订单"}),t.reLaunch({url:"/pages/order/index?current="+e+"&orderStatus=0"})})).catch()},refund:function(e){t.navigateTo({url:"/pages/my/torefund?id="+this.list[0].id+"&orderSn="+this.list[0].orderSn+"&payAmount="+this.list[0].payAmount})},repurchase:function(){console.log("去复购")},remindDelivery:function(){console.log("提醒发货")},confirmReceipt:function(){console.log("确认收货")},checkLogistics:function(){console.log("查看物流")},getbuts:function(t){switch(t){case"0":this.buts=["取消订单","待付款"];break;case"1":this.buts=["申请退款"];break;case"2":this.buts=["申请退款"];break}},getOrderList:function(t){var e=this;this.$u.api.queryOrder({batchId:t}).then((function(t){console.log(t),e.list=t})).catch()},getAppHeight:function(){this.Height=t.getSystemInfoSync().windowHeight+"px"},toRefund:function(){t.navigateTo({url:"/pages/order/refund"})}}};e.default=n}).call(this,n(1)["default"])},517:function(t,e,n){"use strict";n.r(e);var r=n(518),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=i.a},518:function(t,e,n){}},[[511,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/topaid.js.map