(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/edit"],{"0121":function(e,t,s){"use strict";(function(e,t){var i=s("4ea4");s("3afe");i(s("66fd"));var n=i(s("02e3"));e.__webpack_require_UNI_MP_PLUGIN__=s,t(n.default)}).call(this,s("bc2e")["default"],s("543d")["createPage"])},"02e3":function(e,t,s){"use strict";s.r(t);var i=s("3248"),n=s("5200");for(var o in n)["default"].indexOf(o)<0&&function(e){s.d(t,e,(function(){return n[e]}))}(o);s("f0a6");var a=s("f0c5"),r=Object(a["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=r.exports},3248:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return i}));var i={uForm:function(){return s.e("uview-ui/components/u-form/u-form").then(s.bind(null,"839a"))},uFormItem:function(){return Promise.all([s.e("common/vendor"),s.e("uview-ui/components/u-form-item/u-form-item")]).then(s.bind(null,"5a25"))},uInput:function(){return Promise.all([s.e("common/vendor"),s.e("uview-ui/components/u-input/u-input")]).then(s.bind(null,"438b"))},uPicker:function(){return Promise.all([s.e("common/vendor"),s.e("uview-ui/components/u-picker/u-picker")]).then(s.bind(null,"4854"))},uSearch:function(){return s.e("uview-ui/components/u-search/u-search").then(s.bind(null,"59e0"))},uButton:function(){return s.e("uview-ui/components/u-button/u-button").then(s.bind(null,"596e"))},uSwitch:function(){return s.e("uview-ui/components/u-switch/u-switch").then(s.bind(null,"a111"))}},n=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.show=!0})},o=[]},"35f4":function(e,t,s){},5200:function(e,t,s){"use strict";s.r(t);var i=s("e60e"),n=s.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){s.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},e60e:function(e,t,s){"use strict";(function(e){var i=s("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s("2ef0")),o={data:function(){var e=this;return{indexList:[],schoolList:[],extra:{schoolName:"",className:""},schoolClassList:[],classList:[],Height:"",checked:!1,form:{name:"",parentsMobile:"",area:"",textarea:""},address:{},show:!1,isTransferRange:[{label:"否",id:0},{label:"是",id:1}],showSchool:!1,showClass:!1,isTransferShow:!1,extar:{schoolName:"",className:""},rules:{studentName:[{required:!0,message:"请输入姓名"}],parentsMobile:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:function(t,s,i){return e.$u.test.mobile(s)},message:"手机号码不正确",trigger:["change","blur"]}],schoolName:[{required:!0,message:"请输入所在学校"}],className:[{required:!0,message:"请输入所在班级"}]},id:"",disabled:!1}},onLoad:function(t){var s=this;this.loadmore(),t.id&&(this.id=t.id,e.setNavigationBarTitle({title:"编辑地址"}),this.$u.api.queryUserInformation({id:t.id}).then((function(e){var i=e.find((function(e){return e.id==t.id}));console.log(e,"编辑地址"),s.form={studentName:i.studentName,parentsMobile:i.parentsMobile,schoolName:i.schoolName,className:i.className,isTransfer:i.isTransfer&&s.isTransferRange[i.isTransfer].label||""},s.checked="0"!==i.sequence,s.disabled="1"===i.sequence})).catch((function(e){}))),this.getAppHeight()},onReady:function(){this.$refs.uForm.setRules(this.rules)},methods:{searchSchool:n.default.debounce((function(e){this.indexList=e?this.schoolList.filter((function(t){return t.schoolName.indexOf(e)>-1})):this.schoolList}),1e3,{leading:!0}),searchClass:n.default.debounce((function(e){this.schoolClassList=e?this.classList.filter((function(t){return t.className.indexOf(e)>-1})):this.classList}),1e3,{leading:!0}),geToSelectSchool:function(){this.showSchool=!0,this.indexList=this.schoolList,e.setNavigationBarTitle({title:"选择学校"})},geToSelectClass:function(){this.showClass=!0,this.schoolClassList=this.classList,e.setNavigationBarTitle({title:"选择班级"})},selectedSchool:function(t){this.form.schoolName=t.schoolName,this.form.className="",this.schoolClassList=t.schoolClassList||[],this.classList=JSON.parse(JSON.stringify(this.schoolClassList)),this.showSchool=!1,e.setNavigationBarTitle({title:this.id?"编辑学生信息":"添加学生信息"})},selectedClass:function(t){this.form.className=t.className,this.showClass=!1,e.setNavigationBarTitle({title:this.id?"编辑学生信息":"添加学生信息"})},scrolltolower:function(){this.loadmore()},loadmore:function(){this.searchQuery()},searchQuery:function(e){var t=this;this.$u.api.querySchoolsAndClass({pageNum:1,pageSize:50,schoolName:e}).then((function(e){t.indexList=e.records,t.schoolList=JSON.parse(JSON.stringify(t.indexList))}))},submit:function(){var e=this;this.$refs.uForm.validate((function(t){t?""!==e.id?e.alterAddress():e.addAddress():console.log("验证失败")}))},cancel:function(){this.show=!1},confirm:function(e){this.form.isTransfer=this.isTransferRange[e].label},alterAddress:function(){var t=this;this.$u.api.addOrUpdateStuInformation({studentName:this.form.studentName,parentsMobile:this.form.parentsMobile,schoolName:this.form.schoolName,className:this.form.className,id:this.id,sequence:this.checked?1:0,isTransfer:this.form.isTransfer&&this.isTransferRange.find((function(e){return e.label==t.form.isTransfer})).id||""}).then((function(t){e.navigateBack()})).catch((function(e){}))},addAddress:function(){var t=this;this.$u.api.addOrUpdateStuInformation({studentName:this.form.studentName,parentsMobile:this.form.parentsMobile,schoolName:this.form.schoolName,className:this.form.className,sequence:this.checked?1:0,isTransfer:this.form.isTransfer&&this.isTransferRange.find((function(e){return e.label==t.form.isTransfer})).id||""}).then((function(t){e.navigateBack()})).catch((function(e){}))},change:function(e){},getAppHeight:function(){this.Height=e.getSystemInfoSync().windowHeight+"px"}}};t.default=o}).call(this,s("543d")["default"])},f0a6:function(e,t,s){"use strict";var i=s("35f4"),n=s.n(i);n.a}},[["0121","common/runtime","common/vendor"]]]);