(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commodity/info"],{"46e6":function(t,e,i){"use strict";var n=i("78ae"),o=i.n(n);o.a},7240:function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("3afe");n(i("66fd"));var o=n(i("b8b0"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"78ae":function(t,e,i){},af93:function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("9523")),u=n(i("2ef0"));function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var r=(0,o.default)({data:function(){return{list:[],showPhone:!1,floorPrice:0,highestPrice:0,floorPriceVip:0,highestPriceVip:0,share:{title:"一猿亿码-商品详情",path:"/pages/index/index",imageUrl:"http://120.78.163.4:8082/login/logo.png",desc:"",content:"测试商品详情页分享"},swiperList:[],dataList:[],priceList:[],show:!1,value:1,price:0,flag:"",isActivity:!1,close:!1,spuId:"",checked:{},addList:{},imageUrl:"",paddingBottomHeight:0,isCart:!1}},filters:{dataListFilter:function(t){return t||""}},onLoad:function(){this.getReq()},methods:{getReq:function(){var t=this;this.$u.api.queryContactUs().then((function(e){t.list=e,console.log("list",t.list,e)}))},skuchange:function(){this.close=!0,this.isCart=!1},getPhoneInfo:function(){var e=this;t.getSystemInfo({success:function(t){["X","XR","XS","11","12"].forEach((function(i){-1!=t.model.indexOf(i)&&-1!=t.model.indexOf("iPhone")&&(e.paddingBottomHeight=40)}))}})},confirm:u.default.debounce((function(){this.$requiredLogin()&&(this.checked=c(c({},this.checked),{},{value:this.value,spuName:this.dataList.spuName}),this.addList=c({},this.checked),this.close=!1,this.isCart?this.addShoppingCart():this.buy())}),1e3,{leading:!0,trailing:!1}),valChange:function(t){},getCommodityDetails:function(){var e=this;this.$u.api.getCommodityDetails({spuId:this.spuId}).then((function(t){e.dataList=t,e.floorPrice=t.floorPrice,e.floorPriceVip=t.floorPriceVip,e.highestPrice=t.highestPrice,e.highestPriceVip=t.highestPriceVip,e.imageUrl=t.imgUrl,e.checked={coupon:1,id:t.productSkuInfoEntities[0].id,price:t.productSkuInfoEntities[0].price,skuDefaultImg:t.productSkuInfoEntities[0].skuDefaultImg,skuName:t.productSkuInfoEntities[0].skuName,spuId:t.productSkuInfoEntities[0].spuId,stock:t.productSkuInfoEntities[0].stock,spuType:t.productSkuInfoEntities[0].spuType,deleteFlag:t.productSkuInfoEntities[0].deleteFlag,vipPrice:t.productSkuInfoEntities[0].vipPrice,productSkuInfoEntities:t.productSkuInfoEntities},1==t.isActivity||""===t.productSkuInfoEntities[0].coupon||0===t.productSkuInfoEntities[0].coupon?(e.isActivity=!0,e.checked.coupon=t.productSkuInfoEntities[0].stock):e.isActivity=!1,t.productSkuInfoEntities.forEach((function(t){e.priceList.push(t.price)})),e.priceList=e.priceList.sort((function(t,e){return t-e})),e.priceList[0]==e.priceList[e.priceList.length-1]?e.price="".concat(e.priceList[0]):e.price="".concat(e.priceList[0]," - ").concat(e.priceList[e.priceList.length-1]),e.flag=e.dataList.flag,e.share.title=t.spuName,e.share.path="pages/commodity/info?id="+t.id,e.share.imageUrl=t.imgUrl,e.share.desc="",e.share.content="分享一猿亿码商品详情"})).catch((function(e){"商品不存在"==e.msg&&(t.redirectTo({url:"/pages/index/index"}),t.showToast({title:e.msg}))}))},addCollectIofo:function(){this.$u.api.collectInfo({spuId:this.spuId}).then((function(t){}))},collect:u.default.debounce((function(){var e=this;if(this.$requiredLogin()){var i="true"===this.flag?"0":"1";this.$u.api.wxCollect({isCollect:i,spuId:this.dataList.id}).then((function(i){e.getCommodityDetails(),"true"===e.flag?t.showToast({title:"取消收藏"}):t.showToast({title:"收藏成功"})})).catch((function(t){}))}}),1e3,{leading:!0,trailing:!1}),handlerSkuName:function(t){this.value=1,this.checked={coupon:1,stock:t.stock,id:t.id,price:t.price,skuDefaultImg:t.skuDefaultImg,skuName:t.skuName,spuId:t.spuId,spuType:t.spuType,vipPrice:t.vipPrice},(this.isActivity||""===t.coupon||0===t.coupon)&&(this.checked.coupon=t.stock)},shoppingCart:u.default.debounce((function(){this.$requiredLogin()&&t.navigateTo({url:"/pages/vehicle/index"})}),1e3,{leading:!0,trailing:!1}),addShoppingCart:function(){this.$requiredLogin()&&(this.isCart=!0,this.addList.id?this.$u.api.addShoppingCart({skuTwoId:this.addList.id,spuId:this.addList.spuId,commNum:this.addList.value,imgUrl:this.addList.skuDefaultImg?this.addList.skuDefaultImg:this.imageUrl}).then((function(e){t.showToast({title:"添加成功",icon:"none"})})).catch((function(t){})):this.close=!0)},buy:function(){var e=this;this.$requiredLogin()&&(this.addList.id?this.$u.api.queryUserInformation({sequence:"1"}).then((function(i){i.length?t.navigateTo({url:"/pages/order/confirmOrder?supId="+e.addList.spuId+"&skuId="+e.addList.id+"&num="+e.addList.value}):t.navigateTo({url:"/pages/address/index"})})).catch():this.close=!0)},getParam:function(t,e){try{var i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=e.split("?")[1].match(i);return null!=n?n[2]:""}catch(o){return""}}},onHide:function(){this.addList={}},onShow:function(){var e=t.getStorageSync("token");e&&this.addCollectIofo(),this.isCart=!1}},"onLoad",(function(e){var i=this;if(console.log(e),e.q){var n=decodeURIComponent(e.q);this.spuId=this.getParam("id",n);var o=this.getParam("encode",n),u={spuId:this.spuId,encode:o};console.log(u),t.setStorageSync("couponCard",JSON.stringify(u))}else this.spuId=e.id;this.$nextTick((function(){i.getCommodityDetails()})),this.getPhoneInfo()}));e.default=r}).call(this,i("543d")["default"])},b8b0:function(t,e,i){"use strict";i.r(e);var n=i("c2dc"),o=i("fcac");for(var u in o)["default"].indexOf(u)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(u);i("46e6");var s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=c.exports},c2dc:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return u})),i.d(e,"a",(function(){return n}));var n={phoneModal:function(){return i.e("components/phone-modal/phone-modal").then(i.bind(null,"3f6c"))},uSwiper:function(){return i.e("uview-ui/components/u-swiper/u-swiper").then(i.bind(null,"3eb5"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"37b7"))},uNumberBox:function(){return i.e("uview-ui/components/u-number-box/u-number-box").then(i.bind(null,"ebff"))},uCellGroup:function(){return i.e("uview-ui/components/u-cell-group/u-cell-group").then(i.bind(null,"0e04"))},uCellItem:function(){return i.e("uview-ui/components/u-cell-item/u-cell-item").then(i.bind(null,"3a43"))},uParse:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-parse/u-parse")]).then(i.bind(null,"f575"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t._f("dataListFilter")(t.dataList.spuName));t._isMounted||(t.e0=function(e){t.showPhone=!t.showPhone}),t.$mp.data=Object.assign({},{$root:{f0:i}})},u=[]},fcac:function(t,e,i){"use strict";i.r(e);var n=i("af93"),o=i.n(n);for(var u in n)["default"].indexOf(u)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(u);e["default"]=o.a}},[["7240","common/runtime","common/vendor"]]]);